'use strict';

var createDispatcher = function createDispatcher(rule) {
  var listeners = [];

  var dispatch = function dispatch(action) {
    var updates = rule(action);

    listeners.forEach(function (listener) {
      return listener(updates);
    });
  };

  var subscribe = function subscribe(listener) {
    listeners.push(listener);

    return function () {
      unsubscribe(listener);
    };
  };

  var unsubscribe = function unsubscribe(l) {
    listeners = listeners.filter(function (listener) {
      return listener !== l;
    });
  };

  return { dispatch: dispatch, subscribe: subscribe, unsubscribe: unsubscribe };
};

module.exports = createDispatcher;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9jcmVhdGVEaXNwYXRjaGVyLmpzIl0sIm5hbWVzIjpbImNyZWF0ZURpc3BhdGNoZXIiLCJydWxlIiwibGlzdGVuZXJzIiwiZGlzcGF0Y2giLCJhY3Rpb24iLCJ1cGRhdGVzIiwiZm9yRWFjaCIsImxpc3RlbmVyIiwic3Vic2NyaWJlIiwicHVzaCIsInVuc3Vic2NyaWJlIiwibCIsImZpbHRlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLG1CQUFtQixTQUFuQkEsZ0JBQW1CLENBQUNDLElBQUQsRUFBVTtBQUNqQyxNQUFJQyxZQUFZLEVBQWhCOztBQUVBLE1BQU1DLFdBQVcsU0FBWEEsUUFBVyxDQUFDQyxNQUFELEVBQVk7QUFDM0IsUUFBTUMsVUFBVUosS0FBS0csTUFBTCxDQUFoQjs7QUFFQUYsY0FBVUksT0FBVixDQUFrQixVQUFDQyxRQUFEO0FBQUEsYUFBY0EsU0FBU0YsT0FBVCxDQUFkO0FBQUEsS0FBbEI7QUFDRCxHQUpEOztBQU1BLE1BQU1HLFlBQVksU0FBWkEsU0FBWSxDQUFDRCxRQUFELEVBQWM7QUFDOUJMLGNBQVVPLElBQVYsQ0FBZUYsUUFBZjs7QUFFQSxXQUFPLFlBQU07QUFDWEcsa0JBQVlILFFBQVo7QUFDRCxLQUZEO0FBR0QsR0FORDs7QUFRQSxNQUFNRyxjQUFjLFNBQWRBLFdBQWMsQ0FBQ0MsQ0FBRCxFQUFPO0FBQ3pCVCxnQkFBWUEsVUFBVVUsTUFBVixDQUFpQixVQUFDTCxRQUFELEVBQWM7QUFBRSxhQUFRQSxhQUFhSSxDQUFyQjtBQUEwQixLQUEzRCxDQUFaO0FBQ0QsR0FGRDs7QUFJQSxTQUFPLEVBQUVSLGtCQUFGLEVBQVlLLG9CQUFaLEVBQXVCRSx3QkFBdkIsRUFBUDtBQUNELENBdEJEOztBQXdCQUcsT0FBT0MsT0FBUCxHQUFpQmQsZ0JBQWpCIiwiZmlsZSI6ImNyZWF0ZURpc3BhdGNoZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGNyZWF0ZURpc3BhdGNoZXIgPSAocnVsZSkgPT4ge1xuICBsZXQgbGlzdGVuZXJzID0gW107XG5cbiAgY29uc3QgZGlzcGF0Y2ggPSAoYWN0aW9uKSA9PiB7XG4gICAgY29uc3QgdXBkYXRlcyA9IHJ1bGUoYWN0aW9uKTtcblxuICAgIGxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIodXBkYXRlcykpO1xuICB9O1xuXG4gIGNvbnN0IHN1YnNjcmliZSA9IChsaXN0ZW5lcikgPT4ge1xuICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB1bnN1YnNjcmliZShsaXN0ZW5lcik7XG4gICAgfTtcbiAgfTtcblxuICBjb25zdCB1bnN1YnNjcmliZSA9IChsKSA9PiB7XG4gICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLmZpbHRlcigobGlzdGVuZXIpID0+IHsgcmV0dXJuIChsaXN0ZW5lciAhPT0gbCk7IH0pO1xuICB9O1xuXG4gIHJldHVybiB7IGRpc3BhdGNoLCBzdWJzY3JpYmUsIHVuc3Vic2NyaWJlIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZURpc3BhdGNoZXI7XG4iXX0=