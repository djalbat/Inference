'use strict';

var createDispatcher = function createDispatcher(rule) {
  var listeners = [];

  var dispatch = function dispatch(action) {
    var result = rule(action);

    listeners.forEach(function (listener) {
      return listener(result);
    });
  };

  var subscribe = function subscribe(listener) {
    listeners.push(listener);

    return function () {
      unsubscribe(listener);
    };
  };

  var unsubscribe = function unsubscribe(l) {
    listeners = listeners.filter(function (listener) {
      return listener !== l;
    });
  };

  return { dispatch: dispatch, subscribe: subscribe, unsubscribe: unsubscribe };
};

module.exports = createDispatcher;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9jcmVhdGVEaXNwYXRjaGVyLmpzIl0sIm5hbWVzIjpbImNyZWF0ZURpc3BhdGNoZXIiLCJydWxlIiwibGlzdGVuZXJzIiwiZGlzcGF0Y2giLCJhY3Rpb24iLCJyZXN1bHQiLCJmb3JFYWNoIiwibGlzdGVuZXIiLCJzdWJzY3JpYmUiLCJwdXNoIiwidW5zdWJzY3JpYmUiLCJsIiwiZmlsdGVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsbUJBQW1CLFNBQW5CQSxnQkFBbUIsQ0FBQ0MsSUFBRCxFQUFVO0FBQ2pDLE1BQUlDLFlBQVksRUFBaEI7O0FBRUEsTUFBTUMsV0FBVyxTQUFYQSxRQUFXLENBQUNDLE1BQUQsRUFBWTtBQUMzQixRQUFNQyxTQUFTSixLQUFLRyxNQUFMLENBQWY7O0FBRUFGLGNBQVVJLE9BQVYsQ0FBa0IsVUFBQ0MsUUFBRDtBQUFBLGFBQWNBLFNBQVNGLE1BQVQsQ0FBZDtBQUFBLEtBQWxCO0FBQ0QsR0FKRDs7QUFNQSxNQUFNRyxZQUFZLFNBQVpBLFNBQVksQ0FBQ0QsUUFBRCxFQUFjO0FBQzlCTCxjQUFVTyxJQUFWLENBQWVGLFFBQWY7O0FBRUEsV0FBTyxZQUFNO0FBQ1hHLGtCQUFZSCxRQUFaO0FBQ0QsS0FGRDtBQUdELEdBTkQ7O0FBUUEsTUFBTUcsY0FBYyxTQUFkQSxXQUFjLENBQUNDLENBQUQsRUFBTztBQUN6QlQsZ0JBQVlBLFVBQVVVLE1BQVYsQ0FBaUIsVUFBQ0wsUUFBRCxFQUFjO0FBQUUsYUFBUUEsYUFBYUksQ0FBckI7QUFBMEIsS0FBM0QsQ0FBWjtBQUNELEdBRkQ7O0FBSUEsU0FBTyxFQUFFUixrQkFBRixFQUFZSyxvQkFBWixFQUF1QkUsd0JBQXZCLEVBQVA7QUFDRCxDQXRCRDs7QUF3QkFHLE9BQU9DLE9BQVAsR0FBaUJkLGdCQUFqQiIsImZpbGUiOiJjcmVhdGVEaXNwYXRjaGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBjcmVhdGVEaXNwYXRjaGVyID0gKHJ1bGUpID0+IHtcbiAgbGV0IGxpc3RlbmVycyA9IFtdO1xuXG4gIGNvbnN0IGRpc3BhdGNoID0gKGFjdGlvbikgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHJ1bGUoYWN0aW9uKTtcblxuICAgIGxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIocmVzdWx0KSk7XG4gIH07XG5cbiAgY29uc3Qgc3Vic2NyaWJlID0gKGxpc3RlbmVyKSA9PiB7XG4gICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHVuc3Vic2NyaWJlKGxpc3RlbmVyKTtcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IHVuc3Vic2NyaWJlID0gKGwpID0+IHtcbiAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuZmlsdGVyKChsaXN0ZW5lcikgPT4geyByZXR1cm4gKGxpc3RlbmVyICE9PSBsKTsgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHsgZGlzcGF0Y2gsIHN1YnNjcmliZSwgdW5zdWJzY3JpYmUgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlRGlzcGF0Y2hlcjtcbiJdfQ==