'use strict';

var createDispatcher = function createDispatcher(rule) {
	var listeners = [];

	var dispatch = function dispatch(action) {
		var update = rule(action);

		listeners.forEach(function (listener) {
			var ruleNames = listener.ruleNames;


			if (ruleNames.length === 0 || ruleNames.some(function (ruleName) {
				return update[ruleName] !== undefined;
			})) {
				listener(update);
			}
		});
	};

	var subscribe = function subscribe(listener) {
		for (var _len = arguments.length, ruleNames = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
			ruleNames[_key - 1] = arguments[_key];
		}

		Object.assign(listener, {
			ruleNames: ruleNames
		});

		listeners.push(listener);

		return function () {
			return unsubscribe(listener);
		};
	};

	var unsubscribe = function unsubscribe(l) {
		listeners = listeners.filter(function (listener) {
			return listener !== l;
		});
	};

	return { dispatch: dispatch, subscribe: subscribe, unsubscribe: unsubscribe };
};

module.exports = createDispatcher;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9jcmVhdGVEaXNwYXRjaGVyLmpzIl0sIm5hbWVzIjpbImNyZWF0ZURpc3BhdGNoZXIiLCJydWxlIiwibGlzdGVuZXJzIiwiZGlzcGF0Y2giLCJhY3Rpb24iLCJ1cGRhdGUiLCJmb3JFYWNoIiwibGlzdGVuZXIiLCJydWxlTmFtZXMiLCJsZW5ndGgiLCJzb21lIiwicnVsZU5hbWUiLCJ1bmRlZmluZWQiLCJzdWJzY3JpYmUiLCJPYmplY3QiLCJhc3NpZ24iLCJwdXNoIiwidW5zdWJzY3JpYmUiLCJsIiwiZmlsdGVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsbUJBQW1CLFNBQW5CQSxnQkFBbUIsQ0FBQ0MsSUFBRCxFQUFVO0FBQ2xDLEtBQUlDLFlBQVksRUFBaEI7O0FBRUEsS0FBTUMsV0FBVyxTQUFYQSxRQUFXLENBQUNDLE1BQUQsRUFBWTtBQUM1QixNQUFNQyxTQUFTSixLQUFLRyxNQUFMLENBQWY7O0FBRUFGLFlBQVVJLE9BQVYsQ0FBa0IsVUFBQ0MsUUFBRCxFQUFjO0FBQUEsT0FDdkJDLFNBRHVCLEdBQ1RELFFBRFMsQ0FDdkJDLFNBRHVCOzs7QUFHL0IsT0FBS0EsVUFBVUMsTUFBVixLQUFxQixDQUF0QixJQUE0QkQsVUFBVUUsSUFBVixDQUFlLFVBQUNDLFFBQUQ7QUFBQSxXQUFlTixPQUFPTSxRQUFQLE1BQXFCQyxTQUFwQztBQUFBLElBQWYsQ0FBaEMsRUFBZ0c7QUFDL0ZMLGFBQVNGLE1BQVQ7QUFDQTtBQUNELEdBTkQ7QUFPQSxFQVZEOztBQVlBLEtBQU1RLFlBQVksU0FBWkEsU0FBWSxDQUFDTixRQUFELEVBQTRCO0FBQUEsb0NBQWRDLFNBQWM7QUFBZEEsWUFBYztBQUFBOztBQUM3Q00sU0FBT0MsTUFBUCxDQUFjUixRQUFkLEVBQXdCO0FBQ3ZCQztBQUR1QixHQUF4Qjs7QUFJQU4sWUFBVWMsSUFBVixDQUFlVCxRQUFmOztBQUVBLFNBQVE7QUFBQSxVQUFNVSxZQUFZVixRQUFaLENBQU47QUFBQSxHQUFSO0FBQ0EsRUFSRDs7QUFVQSxLQUFNVSxjQUFjLFNBQWRBLFdBQWMsQ0FBQ0MsQ0FBRCxFQUFPO0FBQzFCaEIsY0FBWUEsVUFBVWlCLE1BQVYsQ0FBaUIsVUFBQ1osUUFBRDtBQUFBLFVBQWVBLGFBQWFXLENBQTVCO0FBQUEsR0FBakIsQ0FBWjtBQUNBLEVBRkQ7O0FBSUEsUUFBTyxFQUFFZixrQkFBRixFQUFZVSxvQkFBWixFQUF1Qkksd0JBQXZCLEVBQVA7QUFDQSxDQTlCRDs7QUFnQ0FHLE9BQU9DLE9BQVAsR0FBaUJyQixnQkFBakIiLCJmaWxlIjoiY3JlYXRlRGlzcGF0Y2hlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgY3JlYXRlRGlzcGF0Y2hlciA9IChydWxlKSA9PiB7XG5cdGxldCBsaXN0ZW5lcnMgPSBbXTtcblxuXHRjb25zdCBkaXNwYXRjaCA9IChhY3Rpb24pID0+IHtcblx0XHRjb25zdCB1cGRhdGUgPSBydWxlKGFjdGlvbik7XG5cblx0XHRsaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IHtcblx0XHRcdGNvbnN0IHsgcnVsZU5hbWVzIH0gPSBsaXN0ZW5lcjtcblxuXHRcdFx0aWYgKChydWxlTmFtZXMubGVuZ3RoID09PSAwKSB8fCBydWxlTmFtZXMuc29tZSgocnVsZU5hbWUpID0+ICh1cGRhdGVbcnVsZU5hbWVdICE9PSB1bmRlZmluZWQpKSkge1xuXHRcdFx0XHRsaXN0ZW5lcih1cGRhdGUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdGNvbnN0IHN1YnNjcmliZSA9IChsaXN0ZW5lciwgLi4ucnVsZU5hbWVzKSA9PiB7XG5cdFx0T2JqZWN0LmFzc2lnbihsaXN0ZW5lciwge1xuXHRcdFx0cnVsZU5hbWVzXG5cdFx0fSk7XG5cblx0XHRsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG5cblx0XHRyZXR1cm4gKCgpID0+IHVuc3Vic2NyaWJlKGxpc3RlbmVyKSk7XG5cdH07XG5cblx0Y29uc3QgdW5zdWJzY3JpYmUgPSAobCkgPT4ge1xuXHRcdGxpc3RlbmVycyA9IGxpc3RlbmVycy5maWx0ZXIoKGxpc3RlbmVyKSA9PiAobGlzdGVuZXIgIT09IGwpKTtcblx0fTtcblxuXHRyZXR1cm4geyBkaXNwYXRjaCwgc3Vic2NyaWJlLCB1bnN1YnNjcmliZSB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVEaXNwYXRjaGVyO1xuIl19