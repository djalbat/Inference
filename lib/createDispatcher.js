'use strict';

var createDispatcher = function createDispatcher(rule) {
	var listeners = [];

	var dispatch = function dispatch(action) {
		var update = rule(action);

		listeners.forEach(function (listener) {
			var ruleNames = listener.ruleNames;


			if (!ruleNames.length || ruleNames.some(function (ruleName) {
				return update[ruleName] !== undefined;
			})) {
				listener(update);
			}
		});
	};

	var subscribe = function subscribe(listener) {
		for (var _len = arguments.length, ruleNames = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
			ruleNames[_key - 1] = arguments[_key];
		}

		Object.assign(listener, {
			ruleNames: ruleNames
		});

		listeners.push(listener);

		return function () {
			return unsubscribe(listener);
		};
	};

	var unsubscribe = function unsubscribe(l) {
		listeners = listeners.filter(function (listener) {
			return listener !== l;
		});
	};

	return { dispatch: dispatch, subscribe: subscribe, unsubscribe: unsubscribe };
};

module.exports = createDispatcher;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2VzNi9jcmVhdGVEaXNwYXRjaGVyLmpzIl0sIm5hbWVzIjpbImNyZWF0ZURpc3BhdGNoZXIiLCJydWxlIiwibGlzdGVuZXJzIiwiZGlzcGF0Y2giLCJhY3Rpb24iLCJ1cGRhdGUiLCJmb3JFYWNoIiwibGlzdGVuZXIiLCJydWxlTmFtZXMiLCJsZW5ndGgiLCJzb21lIiwicnVsZU5hbWUiLCJ1bmRlZmluZWQiLCJzdWJzY3JpYmUiLCJPYmplY3QiLCJhc3NpZ24iLCJwdXNoIiwidW5zdWJzY3JpYmUiLCJsIiwiZmlsdGVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsbUJBQW1CLFNBQW5CQSxnQkFBbUIsQ0FBQ0MsSUFBRCxFQUFVO0FBQ2xDLEtBQUlDLFlBQVksRUFBaEI7O0FBRUEsS0FBTUMsV0FBVyxTQUFYQSxRQUFXLENBQUNDLE1BQUQsRUFBWTtBQUM1QixNQUFNQyxTQUFTSixLQUFLRyxNQUFMLENBQWY7O0FBRUFGLFlBQVVJLE9BQVYsQ0FBa0IsVUFBQ0MsUUFBRCxFQUFjO0FBQUEsT0FDdkJDLFNBRHVCLEdBQ1RELFFBRFMsQ0FDdkJDLFNBRHVCOzs7QUFHL0IsT0FBSSxDQUFDQSxVQUFVQyxNQUFYLElBQXFCRCxVQUFVRSxJQUFWLENBQWUsVUFBQ0MsUUFBRDtBQUFBLFdBQWVOLE9BQU9NLFFBQVAsTUFBcUJDLFNBQXBDO0FBQUEsSUFBZixDQUF6QixFQUF5RjtBQUN4RkwsYUFBU0YsTUFBVDtBQUNBO0FBQ0QsR0FORDtBQU9BLEVBVkQ7O0FBWUEsS0FBTVEsWUFBWSxTQUFaQSxTQUFZLENBQUNOLFFBQUQsRUFBNEI7QUFBQSxvQ0FBZEMsU0FBYztBQUFkQSxZQUFjO0FBQUE7O0FBQzdDTSxTQUFPQyxNQUFQLENBQWNSLFFBQWQsRUFBd0I7QUFDdkJDO0FBRHVCLEdBQXhCOztBQUlBTixZQUFVYyxJQUFWLENBQWVULFFBQWY7O0FBRUEsU0FBUTtBQUFBLFVBQU1VLFlBQVlWLFFBQVosQ0FBTjtBQUFBLEdBQVI7QUFDQSxFQVJEOztBQVVBLEtBQU1VLGNBQWMsU0FBZEEsV0FBYyxDQUFDQyxDQUFELEVBQU87QUFDMUJoQixjQUFZQSxVQUFVaUIsTUFBVixDQUFpQixVQUFDWixRQUFEO0FBQUEsVUFBZUEsYUFBYVcsQ0FBNUI7QUFBQSxHQUFqQixDQUFaO0FBQ0EsRUFGRDs7QUFJQSxRQUFPLEVBQUVmLGtCQUFGLEVBQVlVLG9CQUFaLEVBQXVCSSx3QkFBdkIsRUFBUDtBQUNBLENBOUJEOztBQWdDQUcsT0FBT0MsT0FBUCxHQUFpQnJCLGdCQUFqQiIsImZpbGUiOiJjcmVhdGVEaXNwYXRjaGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBjcmVhdGVEaXNwYXRjaGVyID0gKHJ1bGUpID0+IHtcblx0bGV0IGxpc3RlbmVycyA9IFtdO1xuXG5cdGNvbnN0IGRpc3BhdGNoID0gKGFjdGlvbikgPT4ge1xuXHRcdGNvbnN0IHVwZGF0ZSA9IHJ1bGUoYWN0aW9uKTtcblxuXHRcdGxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4ge1xuXHRcdFx0Y29uc3QgeyBydWxlTmFtZXMgfSA9IGxpc3RlbmVyO1xuXG5cdFx0XHRpZiAoIXJ1bGVOYW1lcy5sZW5ndGggfHwgcnVsZU5hbWVzLnNvbWUoKHJ1bGVOYW1lKSA9PiAodXBkYXRlW3J1bGVOYW1lXSAhPT0gdW5kZWZpbmVkKSkpIHtcblx0XHRcdFx0bGlzdGVuZXIodXBkYXRlKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHRjb25zdCBzdWJzY3JpYmUgPSAobGlzdGVuZXIsIC4uLnJ1bGVOYW1lcykgPT4ge1xuXHRcdE9iamVjdC5hc3NpZ24obGlzdGVuZXIsIHtcblx0XHRcdHJ1bGVOYW1lc1xuXHRcdH0pO1xuXG5cdFx0bGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG5cdFx0cmV0dXJuICgoKSA9PiB1bnN1YnNjcmliZShsaXN0ZW5lcikpO1xuXHR9O1xuXG5cdGNvbnN0IHVuc3Vic2NyaWJlID0gKGwpID0+IHtcblx0XHRsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuZmlsdGVyKChsaXN0ZW5lcikgPT4gKGxpc3RlbmVyICE9PSBsKSk7XG5cdH07XG5cblx0cmV0dXJuIHsgZGlzcGF0Y2gsIHN1YnNjcmliZSwgdW5zdWJzY3JpYmUgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlRGlzcGF0Y2hlcjtcbiJdfQ==