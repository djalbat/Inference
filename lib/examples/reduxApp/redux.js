"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.combineReducers = exports.createStore = void 0;

var createStore = function createStore(reducer) {
  var state,
      listeners = [];

  var getState = function getState() {
    return state;
  };

  var dispatch = function dispatch(action) {
    state = reducer(state, action);
    listeners.forEach(function (listener) {
      return listener();
    });
  };

  var subscribe = function subscribe(listener) {
    listeners.push(listener);
    return function () {
      unsubscribe(listener);
    };
  };

  var unsubscribe = function unsubscribe(l) {
    listeners = listeners.filter(function (listener) {
      return listener !== l;
    });
  };

  dispatch();
  return {
    getState: getState,
    dispatch: dispatch,
    subscribe: subscribe,
    unsubscribe: unsubscribe
  };
};

exports.createStore = createStore;

var combineReducers = function combineReducers(reducers) {
  return function () {
    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var action = arguments.length > 1 ? arguments[1] : undefined;
    var keys = Object.keys(reducers),
        nextState = keys.reduce(function (nextState, key) {
      var reducer = reducers[key];
      nextState[key] = reducer(state[key], action);
      return nextState;
    }, {});
    return nextState;
  };
};

exports.combineReducers = combineReducers;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZHV4LmpzIl0sIm5hbWVzIjpbImNyZWF0ZVN0b3JlIiwicmVkdWNlciIsInN0YXRlIiwibGlzdGVuZXJzIiwiZ2V0U3RhdGUiLCJkaXNwYXRjaCIsImFjdGlvbiIsImZvckVhY2giLCJsaXN0ZW5lciIsInN1YnNjcmliZSIsInB1c2giLCJ1bnN1YnNjcmliZSIsImwiLCJmaWx0ZXIiLCJjb21iaW5lUmVkdWNlcnMiLCJyZWR1Y2VycyIsImtleXMiLCJPYmplY3QiLCJuZXh0U3RhdGUiLCJyZWR1Y2UiLCJrZXkiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FBRU8sSUFBTUEsV0FBVyxHQUFHLFNBQWRBLFdBQWMsQ0FBQ0MsT0FBRCxFQUFhO0FBQ3RDLE1BQUlDLEtBQUo7QUFBQSxNQUNJQyxTQUFTLEdBQUcsRUFEaEI7O0FBR0EsTUFBTUMsUUFBUSxHQUFHLFNBQVhBLFFBQVcsR0FBTTtBQUNyQixXQUFPRixLQUFQO0FBQ0QsR0FGRDs7QUFJQSxNQUFNRyxRQUFRLEdBQUcsU0FBWEEsUUFBVyxDQUFDQyxNQUFELEVBQVk7QUFDM0JKLElBQUFBLEtBQUssR0FBR0QsT0FBTyxDQUFDQyxLQUFELEVBQVFJLE1BQVIsQ0FBZjtBQUVBSCxJQUFBQSxTQUFTLENBQUNJLE9BQVYsQ0FBa0IsVUFBQ0MsUUFBRDtBQUFBLGFBQWNBLFFBQVEsRUFBdEI7QUFBQSxLQUFsQjtBQUNELEdBSkQ7O0FBTUEsTUFBTUMsU0FBUyxHQUFHLFNBQVpBLFNBQVksQ0FBQ0QsUUFBRCxFQUFjO0FBQzlCTCxJQUFBQSxTQUFTLENBQUNPLElBQVYsQ0FBZUYsUUFBZjtBQUVBLFdBQVEsWUFBTTtBQUNaRyxNQUFBQSxXQUFXLENBQUNILFFBQUQsQ0FBWDtBQUNELEtBRkQ7QUFHRCxHQU5EOztBQVFBLE1BQU1HLFdBQVcsR0FBRyxTQUFkQSxXQUFjLENBQUNDLENBQUQsRUFBTztBQUN6QlQsSUFBQUEsU0FBUyxHQUFHQSxTQUFTLENBQUNVLE1BQVYsQ0FBaUIsVUFBQ0wsUUFBRCxFQUFjO0FBQ3pDLGFBQVFBLFFBQVEsS0FBS0ksQ0FBckI7QUFDRCxLQUZXLENBQVo7QUFHRCxHQUpEOztBQU1BUCxFQUFBQSxRQUFRO0FBRVIsU0FBTztBQUFFRCxJQUFBQSxRQUFRLEVBQVJBLFFBQUY7QUFBWUMsSUFBQUEsUUFBUSxFQUFSQSxRQUFaO0FBQXNCSSxJQUFBQSxTQUFTLEVBQVRBLFNBQXRCO0FBQWlDRSxJQUFBQSxXQUFXLEVBQVhBO0FBQWpDLEdBQVA7QUFDRCxDQS9CTTs7OztBQWlDQSxJQUFNRyxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLENBQUNDLFFBQUQsRUFBYztBQUMzQyxTQUFPLFlBQXdCO0FBQUEsUUFBdkJiLEtBQXVCLHVFQUFmLEVBQWU7QUFBQSxRQUFYSSxNQUFXO0FBQzdCLFFBQU1VLElBQUksR0FBR0MsTUFBTSxDQUFDRCxJQUFQLENBQVlELFFBQVosQ0FBYjtBQUFBLFFBQ01HLFNBQVMsR0FBR0YsSUFBSSxDQUFDRyxNQUFMLENBQVksVUFBQ0QsU0FBRCxFQUFZRSxHQUFaLEVBQW9CO0FBQzFDLFVBQU1uQixPQUFPLEdBQUdjLFFBQVEsQ0FBQ0ssR0FBRCxDQUF4QjtBQUVBRixNQUFBQSxTQUFTLENBQUNFLEdBQUQsQ0FBVCxHQUFpQm5CLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDa0IsR0FBRCxDQUFOLEVBQWFkLE1BQWIsQ0FBeEI7QUFFQSxhQUFPWSxTQUFQO0FBQ0QsS0FOVyxFQU1ULEVBTlMsQ0FEbEI7QUFTQSxXQUFPQSxTQUFQO0FBQ0QsR0FYRDtBQVlELENBYk0iLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVN0b3JlID0gKHJlZHVjZXIpID0+IHtcbiAgbGV0IHN0YXRlLFxuICAgICAgbGlzdGVuZXJzID0gW107XG5cbiAgY29uc3QgZ2V0U3RhdGUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9O1xuXG4gIGNvbnN0IGRpc3BhdGNoID0gKGFjdGlvbikgPT4ge1xuICAgIHN0YXRlID0gcmVkdWNlcihzdGF0ZSwgYWN0aW9uKTtcblxuICAgIGxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoKSk7XG4gIH07XG5cbiAgY29uc3Qgc3Vic2NyaWJlID0gKGxpc3RlbmVyKSA9PiB7XG4gICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG4gICAgcmV0dXJuICgoKSA9PiB7XG4gICAgICB1bnN1YnNjcmliZShsaXN0ZW5lcik7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgdW5zdWJzY3JpYmUgPSAobCkgPT4ge1xuICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5maWx0ZXIoKGxpc3RlbmVyKSA9PiB7XG4gICAgICByZXR1cm4gKGxpc3RlbmVyICE9PSBsKTtcbiAgICB9KTtcbiAgfTtcblxuICBkaXNwYXRjaCgpO1xuXG4gIHJldHVybiB7IGdldFN0YXRlLCBkaXNwYXRjaCwgc3Vic2NyaWJlLCB1bnN1YnNjcmliZSB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGNvbWJpbmVSZWR1Y2VycyA9IChyZWR1Y2VycykgPT4ge1xuICByZXR1cm4gKHN0YXRlID0ge30sIGFjdGlvbikgPT4ge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhyZWR1Y2VycyksXG4gICAgICAgICAgbmV4dFN0YXRlID0ga2V5cy5yZWR1Y2UoKG5leHRTdGF0ZSwga2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZWR1Y2VyID0gcmVkdWNlcnNba2V5XTtcblxuICAgICAgICAgICAgbmV4dFN0YXRlW2tleV0gPSByZWR1Y2VyKHN0YXRlW2tleV0sIGFjdGlvbik7XG5cbiAgICAgICAgICAgIHJldHVybiBuZXh0U3RhdGU7XG4gICAgICAgICAgfSwge30pO1xuXG4gICAgcmV0dXJuIG5leHRTdGF0ZTtcbiAgfTtcbn07XG4iXX0=